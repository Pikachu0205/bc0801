<html>
	<head>
		<title>Simple Line Graph using SVG and d3.js</title>
		<script src="https://mbostock.github.com/d3/d3.v2.js"></script>
		<style>
			/* tell the SVG path to be a thin blue line without any area fill */
			path {
				stroke: steelblue;
				stroke-width: 1;
				fill: none;
			}
			
			.axis {
			  shape-rendering: crispEdges;
			}

			.x.axis line {
			  stroke: lightgrey;
			}

			.x.axis .minor {
			  stroke-opacity: .5;
			}

			.x.axis path {
			  display: none;
			}

			.y.axis line, .y.axis path {
			  fill: none;
			  stroke: #000;
			}
		</style>
	</head>
	<body>


	<div id="graph" class="aGraph" style="position:absolute;top:0px;left:0; float:left;"></div>


	<script>
		//var data = [3, 6, 2, 7, 5, 2, 0, 3, 8, 9, 2, 5, 9, 3, 6, 3, 6, 2, 7, 5, 2, 1, 3, 8, 9, 2, 5, 9, 2, 7];
		var data = [752,842,173,904,163,866,182,165,886,878,881,159,867,902,150,898,157,341,158,1303,164,596,234,801,164,583,880,166,882,1070,154,3505,1015,918,168,354,156,367,151,590,231,492,156,874,154,584,897,233,504,1052,163,153,591,1294,240,789,157,881,162,600,887,593,1310,157,591,1311,160,873,224,81,853,158,868,883,154,602,1068,169,144,337,168,864,862,159,861,160,599,711,3526,2058,160,870,153,869,157,589,893,153,349,162,882,148,598,883,876,157,880,893,861,358,234,813,160,887,161,880,871,884,157,585,1306,154,606,287,3624,1997,162,900,877,148,892,232,803,153,342,149,889,155,357,144,883,156,871,154,882,221,790,153,871,154,600,2986,252,784,151,919,877,159,597,875,883,147,344,144,347,871,224,517,1334,156,882,165,881,886,155,343,165,350,150,602,862,159,1070,153,863,156,2261,3193,4018,2681,1356,935,154,590,231,807,166,878,152,861,159,577,163,890,153,350,153,580,233,509,1312,156,592,2237,1029,266,780,158,890,156,591,876,239,807,150,589,866,158,601,876,153,877,156,579,869,151,863,161,862,151,592,870,148,341,145,354,158,868,883,381,850,160,892,157,890,156,573,243,252,156,869,155,862,155,871,158,878,856,158,591,591,873,151,870,154,359,159,154,596,1301,151,880,164,159,596,223,805,859,154,600,1313,891,226,797,166,589,150,599,674,2554,2545,6277,1652,2659,2119,2419,2570,6247,154,602,888,150,865,231,498,153,893,160,883,159,868,160,166,369,158,585,586,227,808,161,865,156,600,585,866,165,858,165,874,169,588,234,495,1331,154,869,159,161,576,1308,865,156,591,1299,894,221,795,159,861,161,589,889,897,156,878,146,865,157,586,231,798,150,871,883,149,588,1302,152,875,151,596,3241,6279,869,161,869,158,871,152,589,236,507,870,155,885,164,156,349,159,345,156,862,152,900,225,780,153,873,156,881,867,234,274,164,885,150,877,154,592,1088,147,891,157,898,146,365,141,860,880,159,592,890,250,822,152,339,147,599,2703,735,806,149,340,152,880,154,1071,145,340,147,872,156,160,885,150,875,154,876,153,577,236,269,867,161,160,587,151,878,154,885,166,595,882,159,864,161,902,159,869,160,2047,332,3708,1422,2063,235,935,166,357,131,880,151,879,142,342,224,805,158,340,145,343,158,856,151,874,155,877,149,589,225,783,149,350,149,586,881,225,814,150,861,162,589,149,865,583,1054,163,862,160,581,231,785,150,600,862,171,150,871,148,342,162,582,874,878,233,507,1308,149,579,1073,152,879,157,855,869,149,602,867,855,154,865,351,161,890,150,341,164,142,337,874,154,596,867,148,872,157,871,883,406,595,151,872,152,589,866,147,884,155,867,156,866,155,586,224,791,150,335,153,579,1287,235,784,876,153,600,878,149,589,1304,159,590,1304,148,585,1298,148,586,578,155,872,154,585,158,862,157,876,156,593,1612,2492,2454,2544,3381,7084,5853,2091,1478,1401,892,879,154,605,855,152,861,153,595,879,152,849,153,878,158,586,577,1301,222,805,150,595,880,851,149,869,152,355,173,861,877,158,852,875,155,876,157,873,146,594,874,145,596,1325,162,155,340,149,584,881,884,151,861,230,784,153,592,880,148,862,228,801,150,1696,158,867,881,227,798,585,584,1312,163,857,230,800,152,589,1309,160,868,237,494,154,875,150,580,877,226,88,344,152,3160,2251,2256,9487,158,864,160,580,157,877,230,788,159,863,146,346,155,899,152,854,154,878,145,584,580,1326,156,855,153,585,588,624,181,160,898,1735,2613,6592,880,152,571,160,869,151,592,1299,153,860,149,865,152,155,585,866,153,599,1307,156,587,224,505,1303,873,152,587,146,877,150,900,154,145,339,152,878,158,879,146,581,1296,160,584,153,870,147,876,886,152,873,160,157,2935,994,2396,940,247,498,150,870,142,585,157,586,869,155,882,151,869,157,858,158,866,151,352,147,875,231,794,161,864,168,149,1054,221,812,164,587,872,154,571,886,152,336,158,576,861,155,267,237,159,869,887,156,144,599,871,865,157,872,162,882,226,794,153,869,155,591,874,864,147,869,164,868,870,159,346,156,864,158,878,143,593,248,773,148,877,149,605,1294,877,873,151,159,349,154,586,226,80,364,150,337,164,600,2763,1322,152,343,156,860];
		
		var m = [80, 160, 80, 160]; // margins
		var w = data.length*2.5 - m[1] - m[3]; // width
		var h = 400 - m[0] - m[2]; // height
		
		
		var Ymax = d3.max(data), Ymin = d3.min(data);
		
		// X scale will fit all values from data[] within pixels 0-w
		var x = d3.scale.linear().domain([0, data.length]).range([0, w]);
		// Y scale will fit values from 0-10 within pixels h-0 (Note the inverted domain for the y-scale: bigger is up!)
		//var y = d3.scale.linear().domain([0, 20]).range([h, 0]);
		//var y = d3.scale.linear().domain([Ymin, Ymax]).range([h, 0]);
		// var y = d3.scale.linear().domain([0, d3.max(data)]).range([h, 0]);
		var y = d3.scale.linear().domain([Ymin, Ymax/2]).range([h, 0]);
		
		
		// create a line function that can convert data[] into x and y points
		var line = d3.svg.line()
			// assign the X function to plot our line as we wish
			.x(function(d,i) { 
				// verbose logging to show what's actually being done
				console.log('Plotting X value for data point: ' + d + ' using index: ' + i + ' to be at: ' + x(i) + ' using our xScale.');
				// return the X coordinate where we want to plot this datapoint
				return x(i); 
			})
			.y(function(d) { 
				// verbose logging to show what's actually being done
				console.log('Plotting Y value for data point: ' + d + ' to be at: ' + y(d) + " using our yScale.");
				// return the Y coordinate where we want to plot this datapoint
				return y(d); 
			})


			// Add an SVG element with the desired dimensions and margin.
			var graph = d3.select("#graph").append("svg:svg")
			      .attr("width", w + m[1] + m[3])
			      .attr("height", h + m[0] + m[2])
			    .append("svg:g")
			      .attr("transform", "translate(" + m[3] + "," + m[0] + ")");

			// create yAxis
			var xAxis = d3.svg.axis().scale(x).tickSize(-h).tickSubdivide(true);
			// Add the x-axis.
			graph.append("svg:g")
			      .attr("class", "x axis")
			      .attr("transform", "translate(0," + h + ")")
			      .call(xAxis);


			// create left yAxis
			var yAxisLeft = d3.svg.axis().scale(y).ticks(4).orient("left");
			// Add the y-axis to the left
			graph.append("svg:g")
			      .attr("class", "y axis")
			      .attr("transform", "translate(-25,0)")
			      .call(yAxisLeft);
			
  			// Add the line by appending an svg:path element with the data line we created
			// above do this AFTER the axes above so that the line is above the tick-lines
  			graph.append("svg:path").attr("d", line(data));
			

	</script>



	</body>
</html>
